/* iPhone 5/SE and other very small screens (320px width) */
@media (max-width: 768px) {

	/* Make container take full viewport height */
	.container {
		display: flex;
		flex-direction: column;
		justify-content: space-evenly;
		height: 100vh;
		width: 100%;
		gap: 1px;
		padding-bottom: 15vh !important;
		min-height: calc(100vh + 15vh) !important;
	}

	/* Board sizing and centering */
	#board-container {
		width: 100% !important;
		max-width: 100% !important;
		display: flex;
		justify-content: center;
		align-items: center;
		margin: 0 !important;
		padding: 0 !important;
		order: 2;
		flex-direction: column;
	}

	#chessboard {
		width: 100% !important;
		max-width: 100% !important;
		height: auto !important;
		aspect-ratio: 1 / 1;
		display: block;
		margin: 0 auto;
	}

	/* Card container adjustments - make much more compact */
	.player-frame {
		margin: 0;
		flex: 0 0 auto;
		order: 4;
		width: 100%;
		position: relative;
		background: rgba(245, 245, 245, 0.9);
		display: flex;
		flex-direction: column;
		border-top: 1px solid #ddd;
		margin-bottom: 12vh !important;
		padding-bottom: 8px !important;
	}

	/* Integrate deck info into the card container to save space */

	.card-container {
		display: flex;
		flex-wrap: nowrap;
		justify-content: space-evenly;
		align-items: stretch;
		width: 100%;
		padding: 0 !important;
		margin: 0 !important;
		margin-bottom: 2vh !important;
		overflow-x: auto;
		box-sizing: border-box;
		gap: 0;
		order: 4;
		position: relative;
		height: auto !important;
		min-height: unset !important;
		max-height: unset !important;
	}

	/* Card sizing - fixed for mobile */
	.piece-card {
		width: 60px !important;
		height: 80px !important;
		min-width: 60px !important;
		max-width: 60px !important;
		min-height: 80px !important;
		max-height: 80px !important;
		margin: 2px !important;
		padding: 2px !important;
		border-width: 1px !important;
		box-sizing: border-box !important;
		display: flex;
		align-items: center;
		justify-content: center;
		flex: 0 0 15% !important;
	}

	.card-content {
		transform: none !important;
	}

	.piece-image,
	.piece-card .piece-image,
	.card-content .piece-image {
		width: 90% !important;
		height: auto !important;
		max-height: 60px !important;
		transform: none !important;
	}


	#board-container {
		order: 2;
	}

	.player-frame {
		order: 4;
	}

	.time-controls.player {
		display: none;
	}

	.timer-bar.white-timer-bar {
		display: flex;
		flex-wrap: wrap;
		justify-content: space-between;
		align-items: center;
		padding: 2px 4px;
	}

	/* Create control bar below the board */
	.controls-bar {
		display: flex;
		justify-content: space-between;
		align-items: center;
		width: 100%;
		padding: 4px 6px;
		background: #f0f0f0;
		box-sizing: border-box;
		margin: 0;
		order: 3;
	}



	.deck-info,
	.timer,
	.pass-button,
	.multiplayer-button,
	.spacer {
		width: 90px;
		/* Smaller on mobile */
		min-width: 90px;
		max-width: 90px;
		height: 32px;
		line-height: 20px;
		padding: 6px 8px;
		font-size: 12px;
	}

	.deck-info {
		font-size: 11px;
		/* Slightly smaller for deck info */
	}

	/* Add safe area padding for iOS devices */
	@supports (padding: max(0px)) {
		.container {
			padding-bottom: max(15vh, env(safe-area-inset-bottom) + 10vh) !important;
		}
	}

	.ui-scale {
		transform: scale(0.85);
		transform-origin: top center;
	}

	/* Shrink status-frame, opponent-info, player-info, menu-button and all their sub-elements by 15% */
	#status-frame,
	#status-frame *,

	.opponent-info,
	.opponent-info *,

	.player-info,
	.player-info *,

	.menu-button,
	.menu-button * {
		font-size: 85% !important;
		transform: scale(0.85);
		transform-origin: top center;
	}

	/* Reduce card size height (but not the piece symbols) by 30% */
	.player-frame,
	.card-container {
		height: 70% !important;
		min-height: 70% !important;
		max-height: 70% !important;
	}

	.piece-card {
		height: 70% !important;
		min-height: 70% !important;
		max-height: 70% !important;
	}

	/* Card container: allow horizontal scrolling if needed */
	.card-container {
		display: flex;
		flex-wrap: nowrap;
		overflow-x: auto;
		padding: 4px !important;
		margin: 0 !important;
		gap: 0;
		width: 100%;
		height: auto !important;
		min-height: unset !important;
		max-height: unset !important;
		box-sizing: border-box;
	}

	/* Fixed card size for mobile */
	.piece-card {
		width: 60px !important;
		height: 80px !important;
		min-width: 60px !important;
		max-width: 60px !important;
		min-height: 80px !important;
		max-height: 80px !important;
		margin: 2px !important;
		padding: 2px !important;
		border-width: 1px !important;
		box-sizing: border-box !important;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	/* Do NOT scale the piece symbols inside the cards */
	.piece-card .piece-image,
	.card-content .piece-image {
		transform: none !important;
		width: 90% !important;
		height: auto !important;
		max-height: 60px !important;
	}
}